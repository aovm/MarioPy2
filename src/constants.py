import pygame
import os, platform

# GAME SETTINGS

# 768, 720

WINDOW_WIDTH = 768
WINDOW_HEIGHT = 720
WINDOW_TITLE = "Python Super Mario Bros"
FPS = 60
TARGET_FPS = 60

WINDOW_W_SCALE = 632
WINDOW_H_SCALE = 592

DISPLAY_FLAGS = pygame.DOUBLEBUF

DEBUG_MODE = False

LOADING_TIME = 3

# CAMERA SETTINGS

VIEWPORT_WIDTH = 256
VIEWPORT_HEIGHT = 240

VIEWPORT_MARIO_DIST = 128
VIEWPORT_UI_SIZE = 20
VIEWPORT_LOADING_X = 217

# BG CONSTANTS

LVL11_BACKGROUND_WIDTH = 3376
LVL11_BACKGROUND_HEIGHT = 480

TILE_WIDTH = 16
TILE_HEIGHT = 16

# GAMESTATE CONSTANTS

TRANSITION_INTERVAL = 0.18
GAME_OVER_Y_VEL = 4
GAME_OVER_GRAVITY = .16
GAME_OVER_INTERVAL = 5.8
GAME_OVER_FALL_INTERVAL = 0.20

# MAP CONSTANTS

MAP_OVERWORLD = 'overworld'
MAP_UNDERGROUND = 'underground'

# MARIO/WORLD CONSTANTS

MARIO_GROWING_TIME = 0.989 # SECONDS
MARIO_STAR_TIME = 9.1 # SECONDS, STAR = 8.2
MARIO_DEGROWING_TIME = 0.8
MARIO_INVINCIBILITY_TIME = 2.8 # SECONDS

# MARIO MOVEMENT

MARIO_STOP_X_ACC = 8.0
MARIO_TOP_VEL_X = 150

MARIO_FRICTION = -.045
MARIO_RUN_ACCELERATION = .16
MARIO_TOP_RUN_SPEED = 2.65
MARIO_TOP_FALL_SPEED = 3.15
MARIO_TOP_CROUCH_SPEED = 1.9
MARIO_BOUNCE_Y = 3.4
MARIO_FIREBALLING_INT = 0.21
GRAVITY = .31

SMARIO_JUMP_START = 7.15
BMARIO_JUMP_START = 7.35

# WORLD ANIMATIONS

MYSBLOCK_ANIMATION_DURATION = 0.15
BRICKS_ANIMATION_DURATION = 0.15
BLOCK_COIN_ANIMATION_DURATION = 0.15
IBLOCK_ANIMATION_DURATION = 0.15

SHROOM_ANIMATION_DURATION = 0.8
FLOWER_ANIMATION_DURATION = 0.8

FLOWER_TEXTURE_INTERVAL = 0.01

BRICKCOIN_INIT_VELOCITY = (7.9)
BRICK_COIN_GRAVITY = (0.45)
BRICKCOIN_PARTICLE_DURATION = (0.544)
BRICKCOIN_TEXTURE_INTERVAL = (0.06)

SCORE_Y_VEL = (0.45)
PARTICLE_1000_DURATION = (0.85)
BRICKCOIN_200_PARTICLE_DURATION = (0.65)
ONE_UP_PARTICLE_DURATION = (0.65)

### BRICK BREAK PARTICLE

BRICKS_PARTICLE_TEXTURE_INTERVAL = (0.3)
BRICKS_PARTICLE_X_VELOCITY = (0.9)
BRICKS_PARTICLE_Y_VELOCITY = (3.6)
BRICKS_PARTICLE_GRAVITY = (0.2)
BRICKS_PARTICLE_DURATION = (2)

OBJECT_VELOCITY_X = (0.7)
SHROOM_VELOCITY_X = (0.7)

OBJECT_BUMP_VELOCITY_Y = (3.2)

STAR_BUMP_VEL_Y = (3.4)
STAR_VEL_X = (1.44)

CONTINUE_EVENT = (301)
END_EVENT = (300)

# MARIO TEXTURE CONSTANTS

MARIO_DIST_PER_WALK_ANIMATION = 5.8
MARIO_BETWEEN_STAR_ANIMATION = 0.05

# FILE SETTINGS

BR = "/" if platform.system().lower() == "darwin" else "\\"

def absolutePath(relative_path : str):
    if platform.system().lower() == "darwin":
        return os.getcwd() + "/" + relative_path
    else:
        return os.getcwd() + "\\" + relative_path

def sizeUI():
    return round(WINDOW_WIDTH * VIEWPORT_UI_SIZE / WINDOW_W_SCALE)

def adjustWindow(viewport_w, viewport_h):
    # return (viewport_w, viewport_h)
    return (WINDOW_WIDTH * (viewport_w / WINDOW_W_SCALE), WINDOW_HEIGHT * (viewport_h / WINDOW_H_SCALE))

# COLOR CONSTANTS

RED = (255, 0, 0)
BLUE = (0, 255, 0)
GREEN = (0, 0, 255)
ORANGE = (255, 128, 0)
ROSE = (255, 0, 128)
ROSE_L = (255, 208, 255)
MAGENTA = (255, 0, 255)
VIOLET = (128, 0, 255)
AZURE = (0, 128, 255)
CYAN = (0, 255, 255)
SPRING_GREEN = (0, 255, 128)
CHARTREUSE = (128, 255, 0)
YELLOW = (255, 255, 0)
WHITE = (255, 255, 255)
BLACK = (0, 0, 0)

SKY = (92, 148, 252)

TEXTURE_ALPHA_COLOR = (146, 144, 255)
MAP_TEXTURE_ALPHA_COLOR = (148, 148, 255)

# RED, GREEN, YELLOW
MARIO_PALETTE = ((181, 49, 32), (107, 109, 0), (234, 158, 34))
MARIO_UNDERGROUND_PALETTE = ((0, 64, 77), (0, 124, 141), (181, 235, 242))
# , RED, 
MARIO_FLOWER_PALETTE = ((247, 216, 165), (181, 49, 32), (234, 158, 34))
MARIO_FIRE_STAR_OVERWORLD_PALETTE = (((247, 216, 165), (181, 49, 32), (234, 158, 34)), ((12, 147, 0), (234, 158, 34), (255, 254, 255)), ((181, 49, 32), (234, 158, 34), (255, 254, 255)), ((3, 3, 3), (153, 78, 0), (254, 204, 197)))
MARIO_FIRE_STAR_UNDERGROUND_PALETTE = (((0, 124, 141), (153, 78, 0), (254, 204, 197)), ((181, 49, 32), (234, 158, 34), (255, 254, 255)), ((0, 64, 77), (0, 124, 141), (181, 235, 242)))
ALPHA_COLOR = (10,10,10)

# CHUNK INTERACTUABLES CONSTANTS

POWERUP = "powerup"

# MAP OBJECTS KEYWORDS

GROUND = "ground"
TUBE = "tube"
COIN = "coin"
BRICKS = "bricks"
Q_BLOCK = "?block"
I_BLOCK = "iblock"
G_SHROOM = "growshroom"
L_SHROOM = "lifeshroom"
STAR = "star"
FLAG = "flag"
FLOWER = "flower"
GOOMBA = "goomba"
KOOPA = "koopa"
FIREBALL = "fireball"
CASTLEDOOR = "castledoor"
BLOCK_HITBOX_W = 16
BLOCK_HITBOX_H = 16

G_SHROOM_HITBOX_W = 12
G_SHROOM_HITBOX_H = 14

FLOWER_HITBOX_W = 12
FLOWER_HITBOX_H = 14

FLAG = "flag"
FLAG_HITBOX_W = 4
FLAG_HITBOX_H = 144

S_MARIO_HITBOX_W = 10
S_MARIO_HITBOX_H = 13
B_MARIO_HITBOX_W = 10
B_MARIO_HITBOX_H = 28
B_MARIO6_HITBOX_W = 10
B_MARIO6_HITBOX_H = 21

DOWN_FLAGPOLE_TEXT_INTERVAL = 0.045
DOWN_FLAGPOLE_TOTAL_INTERVAL = 8
DOWN_FLAGPOLE_MARIO_VY = 1.9
DOWN_FLAGPOLE_JUMP_VY = 4
FLAGPOLE_TIMESCORE_INT = 0.007
AFTER_TIMESCORE = 6

GOOMBA_VEL_X = 0.5
GOOMBA_WALK_TEXT = 5
GOOMBA_STOMPTIME = 0.23

KOOPA_ALMOST_SHELL_TIME = 4
KOOPA_SHELL_TIME = 7
KOOPA_SHELL_VX = 1.5

FIREBALL_VX = 3.5
FIREBALL_IVY = 2
FIREBALL_BOUNCE_VY = 3.3
FIREBALL_TEXT_INT = 0.043
FIREBALL_COLL_INT = 0.15

FIRST_MAP_FIRST_TUBE_INT = 1.5
FIRST_MAP_SECOND_TUBE_INT = 2.4
FIRST_MAP_TOTAL_INT = 2.55

SECOND_MAP_TUBE_INT = 1.5
SECOND_MAP_INT = 2

ENTITY_KNOCKED_X = 1.5
ENTITY_KNOCKED_Y = 4
KNOCKED_TIME = 5

COLLISION_TOLERANCE = 7

# INTERACTIVE_TILE CONSTANTS

GENERAL_TIME_PER_ANIMATION = 0.18
